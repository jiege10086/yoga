<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.woniu.mapper.TOrderMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.woniu.domain.TOrder">
        <id column="ord_id" property="ordId" />
        <result column="coa_id" property="coaId" />
        <result column="coa_name" property="coaName" />
        <result column="u_id" property="uId" />
        <result column="u_name" property="uName" />
        <result column="reservation_time" property="reservationTime" />
        <result column="start_time" property="startTime" />
        <result column="end_time" property="endTime" />
        <result column="start_time_millisecond" property="startTimeMillisecond" />
        <result column="end_time_millisecond" property="endTimeMillisecond" />
        <result column="money" property="money" />
        <result column="status" property="status" />
        <result column="u_phone" property="uPhone" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        ord_id, coa_id, coa_name, u_id, u_name, reservation_time, start_time, end_time, start_time_millisecond, end_time_millisecond, money, status, u_phone
    </sql>
    <insert id="addUserOrder">
        insert into t_order(coa_id,coa_name,u_id,u_name,reservation_time,status,u_phone) values (#{coaId},#{coaName},#{uId},#{uName},#{reservationTime},#{status},#{uPhone});
    </insert>
    <insert id="adduserSubscribe">
        insert into t_order(u_id,u_name,coa_id,coa_name,reservation_time,status,u_phone) values (#{uId},#{uName},#{coaId},#{coaName},#{reservationTime},#{status},#{uPhone});
    </insert>
    <update id="updateOrderStatus">
        update t_order set status=6 where ord_id=#{ordId};
    </update>
    <update id="updateuserSubscribe">
        update t_order set u_id=#{uId},u_name=#{uName},coa_id=#{coaId},coa_name=#{coaName},reservation_time=#{reservationTime},status=#{status},u_phone=#{uPhone};
    </update>

    <select id="showUserOrder" resultType="com.woniu.domain.TOrder">
        select * from t_order where u_id=#{uId};
    </select>
    <select id="selectOrder" resultType="com.woniu.domain.TOrder">
        select * from t_order where ord_id=#{ordId};
    </select>
    <select id="selectUserOrder" resultType="com.woniu.domain.TOrder">
        select * from t_order where u_id=#{uid} and coa_id=#{coaId};
    </select>
</mapper>
